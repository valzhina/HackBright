{% extends 'base.html' %}
{% block title %}ChartJS and D3 Demos{% endblock %}

{% block head %}
  <script src="https://cdn.jsdelivr.net/npm/chart.js@3.5.1/dist/chart.min.js"></script>
{% endblock %}

{% block body %}

<canvas id="myChart" width="400" height="400"></canvas>
<script>
const ctx = document.getElementById('myChart');
const myChart = new Chart(ctx, {
    type: 'bar',
    data: {
        labels: ['Red', 'Blue', 'Yellow', 'Green', 'Purple', 'Orange'],
        datasets: [{
            label: '# of Votes',
            data: [12, 19, 3, 5, 2, 3],
            backgroundColor: [
                'rgba(255, 99, 132, 0.2)',
                'rgba(54, 162, 235, 0.2)',
                'rgba(255, 206, 86, 0.2)',
                'rgba(75, 192, 192, 0.2)',
                'rgba(153, 102, 255, 0.2)',
                'rgba(255, 159, 64, 0.2)'
            ],
            borderColor: [
                'rgba(255, 99, 132, 1)',
                'rgba(54, 162, 235, 1)',
                'rgba(255, 206, 86, 1)',
                'rgba(75, 192, 192, 1)',
                'rgba(153, 102, 255, 1)',
                'rgba(255, 159, 64, 1)'
            ],
            borderWidth: 1
        }]
    },
    options: {
        scales: {
            y: {
                beginAtZero: true
            }
        }
    }
});
</script>

  <canvas id="test-chart"></canvas>
  
  <script>
    const testChart = new Chart(
      document.getElementById('test-chart'),
      {
        type: 'line',
        data: {
          labels: ['does', 'this', 'work'],
          datasets: [
            {data: [2, 4, 8]}
          ]
        }
      }
    );
    
  </script>

  <canvas id="bar-chart"></canvas>
  <script>
      new Chart(document.querySelector('#bar-chart'), {
  type: 'bar',
  data: {
    labels: ['Watermelon', 'Cantaloupe', 'Honeydew'],
    datasets: [
      {
        label: 'Today',
        data: [10, 36, 27],
      },
      {
        label: 'Yesterday',
        data: [5, 0, 7],
      },
    ],
  },
});
  </script>



  <footer>
    <p>Copyright 2022. All rights reserved.</p>
  </footer>
{% endblock %}


<div>
  <label for="supp_dose" class="entry">#</label>
    <select name="supp_dose">
      <option value ="1">1</option>
      <option value ="2">2</option>
     <option value ="3">3</option>
     <option value ="4">4</option>
    </select>
</div>

<div>
  <label for="supp_dose" class="entry">#</label>
  <input type="text" name="supp_dose" id="supp_dose"><br>
</div>

<script type='text/javascript' src='script.js'></script>

<script> d3.json(data, function (error,data) {

function tabulate(data, columns) {
  var table = d3.select('body').append('table')
  var thead = table.append('thead')
  var	tbody = table.append('tbody');

  // append the header row
  thead.append('tr')
    .selectAll('th')
    .data(columns).enter()
    .append('th')
      .text(function (column) { return column; });

  // create a row for each object in the data
  var rows = tbody.selectAll('tr')
    .data(data)
    .enter()
    .append('tr');

  // create a cell in each row for each column
  var cells = rows.selectAll('td')
    .data(function (row) {
      return columns.map(function (column) {
        return {column: column, value: row[column]};
      });
    })
    .enter()
    .append('td')
      .text(function (d) { return d.value; });

  return table;
}

// render the table(s)
tabulate(data, ['date', 'close']); // 2 column table

});</script>


<table>
  <tr>
    <th>Name</th>
    {% for ut in st %}
      <th>{{ut}}</th>
    {% endfor %}
  </tr>

  {% for line in data %}
  <tr>
    <td>{{line.supplement_entry}}</td>
    {% for col in st %}
      {% if col == line.supplement_time %}
        <td>{{line.supplement_dose}} {{line.supplement_dose_type}}</td>
      {% else %}
        <td></td>
      {% endif %}
    {% endfor %}

    
  </tr>

  {% endfor %}

  </table>